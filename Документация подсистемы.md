# Документация подсистемы для работы продавцов на площадке маркетплейса
## Введение
Данная документация описывает подсистему, которая позволяет продавцам на меркетплейсе продавать различные товары от множества поставщиков.
## Описание бизнес-процессов
### Регистрация продавца
**Участники:** Продавец, система маркетплейса

**Триггер:** Продавец заходит на платформу и нажимает на кнопку "Стать продавцом".
* Продавец заполняет форму регистрации, указывая:
    * Название компании;
    * Контактные данные (email, телефон);
    * Реквизиты для оплаты;
    * Юридическую информацию (ИНН, ОГРН)
* Система проверяет введенные данные на корректность и уникальность.
* Система отправляет письмо с подтверждением на указанный email.
* Продавец подтверждает регистрацию, переходя по ссылке в письме.
* Система создает аккаунт продавца и предоставляет доступ к личному кабинету.
### Размещение карточек товаров 
**Участники:** Продавец, система маркетплейса, модератор.
**Триггер:** Продавец заходит в личный кабинет и нажимает на кнопку "Добавить товар".
* Продавец заполняет карточку товара, указывая:
    * Название товара;
    * Описание;
    * Категорию;
    * Цену;
    * Фотографии;
    * Характеристики (вес, размер, цвет);
    * Количество на складе.
* Система проверяет заполнение обязательных полей и корректность данных.
* Карточка отправляется на проверку модератору.
* После одобрения модератором товар публикуется на платформе.
* Система уведомляет продавца об успешной публикации.
### Управление товарами на складе 
**Участники:** Продавец, система маркетплейса.
**Триггер:** Изменение количества товара на складе (продажа, пополнение, списание).
* Продавец заходит в личный кабинет и выбирает раздел "Управление складом".
* Продавец вносит изменения:
    * Обновляет количество товара;
    * Добавляет новые позиции;
    * Списывает брак или утерянные товары.
* Система автоматически обновляет данные о наличии товара на платформе.
* Если количество товара достигает нуля, система автоматически скрывает товар из каталога или помечает его как "Нет в наличии".
* Продавец получает уведомление о необходимости пополнения склада, если товар заканчивается.
### Обработка заказов 
**Участники:** Продавец, система маркетплейса, покупатель.
**Триггер:** Покупатель оформляет заказ на платформе.
* Система формирует заказ и уведомляет продавца о новом заказе.
* Продавец проверяет наличие товара на складе.
* Если товар в наличии, продавец подтверждает заказ и готовит его к отправке.
* Если товара нет в наличии, продавец отменяет заказ или уведомляет покупателя о задержке.
* Продавец передает товар в службу доставки и указывает трек-номер в системе.
* Система уведомляет покупателя о статусе заказа (подтвержден, отправлен, доставлен).
* После доставки система закрывает заказ и переводит средства на счет продавца (за вычетом комиссии платформы).
### Взаимодействие с клиентами и администрацией платформы
**Участники:** Продавец, покупатель, администрация платформы.
**Триггер:** Возникновение вопроса, жалобы или необходимости обсуждения.
* Покупатель или продавец создает обращение через раздел "Поддержка" или чат на платформе.
* Если вопрос касается технических проблем или правил платформы, обращение перенаправляется администрации.
* Администрация или продавец отвечает на обращение в течение установленного времени.
* Если вопрос решен, обращение закрывается.
* Если вопрос требует дополнительных действий (возврат товара, пересчет суммы), система фиксирует это и уведомляет участников.
* Все обращения сохраняются в истории для дальнейшего анализа и улучшения сервиса.
## Заинтересованные стороны 
**1. Продавцы**
* Регистрация и управление товарами.
* Размещение и обновление карточек товаров.
* Управление складом и заказами.

**2. Покупатели**
* Доступ к актуальным и подробным карточкам товаров.
* Оформления заказов.

**3. Администрация платформы (владельцы маркетплейса)**
* Привлечение и удержание продавцов на платформе.
* Обеспечение качества и актуальности размещаемых товаров.
* Контроль за соблюдением правил платформы продавцами.

**4. Модераторы платформы**
* Проверка карточек товаров и данных продавцов.

**5. Служба поддержки платформы**
* Обработка обращений от продавцов и покупателей.
* Коммуникация (чаты, тикеты, уведомления).

**6. Разработчики и техническая поддержка**
* Создание интерфейса для продавцов.
* Обеспечение стабильной работы системы (минимизация сбоев и ошибок).
* Сбор обратной связи для улучшения функционала.

**7. Партнеры (логистические компании, платежные системы)**
* Интеграция с системой для автоматизации процессов (доставка, оплата).
* Получение актуальных данных о заказах и транзакциях.

**8. Государственные органы (налоговые службы, регуляторы)**
* Контроль за соблюдением законодательства (налоги, защита прав потребителей).
* Получение данных о транзакциях и продавцах.
## Функциональные и нефункциональные требования к подсистеме
**Функциональные требования:**
1. Система должна предоставлять возможность регистрации новых продавцов через заполнение формы с обязательными полями.
2. Система должна поддерживать авторизацию через email и пароль, а также двухфакторную аутентификацию.
3. Продавец должен иметь возможность создавать, редактировать и удалять карточки товаров, указывая название, описание, цену, категорию, фотографии и характеристики.
4. Система должна предоставлять возможность обновлять количество товаров на складе.
5. Система должна отправлять уведомление продавцу при достижении минимального остатка.
6. Система должна автоматически уведомлять продавца о новых заказах.
7. Продавец должен иметь возможность изменять статус заказа (например, "В обработке", "Отправлен", "Доставлен").
8. Система должна поддерживать автоматическое начисление средств на счет продавца после успешной доставки заказа.
9. Система должна предоставлять продавцам возможность отвечать на вопросы покупателей через встроенный чат или систему тикетов.
10. Продавец должен иметь доступ к отзывам и рейтингам, оставленным покупателями.

**Нефункциональные требования:**
1. Система должна обрабатывать до 100 000 одновременных запросов от продавцов без потери производительности.
2. Время отклика системы при выполнении операций (например, загрузка карточки товара) не должно превышать 2 секунд.
3. Система должна обеспечивать доступность 99,9% времени в год.
4. В случае сбоя система должна автоматически восстанавливать данные из резервных копий.
5. Система должна шифровать все персональные данные продавцов и покупателей (например, реквизиты, контактные данные).
6. Доступ к личному кабинету продавца должен быть защищен двухфакторной аутентификацией.
7. Система должна поддерживать увеличение числа продавцов и товаров без необходимости значительных изменений в архитектуре.
8. Возможность интеграции с дополнительными сервисами (например, новые платежные системы или службы доставки).
9. Система должна корректно работать на всех современных браузерах (Chrome, Firefox, Safari, Edge) и операционных системах (Windows, macOS, Linux).
10. Система должна поддерживать мобильные устройства (адаптивный дизайн или мобильное приложение).
## Моделирование бизнес-процесса
Диаграмма бизнес-процесса "Обработка заказов" в нотации BPMN
![бизнес-процесс](https://github.com/nttorry/---/blob/9370b0d8283d1611eb21be6b81dbed5fe44b2888/BPMN%20diagram%20%D0%9E%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0%20%D0%B7%D0%B0%D0%BA%D0%B0%D0%B7%D0%B0.png)
## Структура базы данных подсистемы
Описание таблиц: 
**Продавец (Seller)**
|Ключ|Поле|Тип|Описание|
|----|----|---|--------|
|PK|seller_id|uuid|уникальный идентификатор продавца|
||name|varchar|название компании|
||email|varchar|контактный email|
||phone|int|контактный телефон|
||registration_date|timestampt|дата регистрации|
||is_active|boolean|Признак активности|
**Товар (Product)**
|Ключ|Поле|Тип|Описание|
|----|----|---|--------|
|PK|product_id|uuid|уникальный идентификатор товара|
||name|varchar|название товара|
||description|varchar|описание товара|
||price|float|цена товара|
||category|text|категория товара|
|FK|seller_id|uuid|идентификатор продавца|
**Скад (Inventory)**
|Ключ|Поле|Тип|Описание|
|----|----|---|--------|
|PK|inventory_id|uuid|уникальный идентификатор записи на складе|
|FK|product_id|uuid|идентификатор товара|
||quantity|int|количество товара на складе|
||last_updated|timestampt|дата последнего обновления|
**Заказ (Order)**
|Ключ|Поле|Тип|Описание|
|----|----|---|--------|
|PK|order_id|uuid|уникальный идентификатор заказа|
|FK|customer_id|uuid|идентификатор покупателя|
||order_date|timestampt|дата оформления заказа|
||status|text|статус заказа|
||total_amount|float|общая сумма заказа|
**Покупатель (Customer)**
|Ключ|Поле|Тип|Описание|
|----|----|---|--------|
|PK|customer_id|uuid|уникальный идентификатор покупателя|
||name|varchar|имя покупателя|
||email|varchar|контактный email|
||phone|int|контактный телефон|
||registration_date|timestampt|дата регистрации|
**Сообщение (Message)**
|Ключ|Поле|Тип|Описание|
|----|----|---|--------|
|PK|message_id|uuid|уникальный идентификатор сообщения|
||sender_id|uuid|идентификатор отправителя|
||receiver_id|uuid|идентификатор получателя|
||content|varchar|текст сообщения|
||message_date|timestampt|дата регистрации|
**Доставка (Delivery)**
|Ключ|Поле|Тип|Описание|
|----|----|---|--------|
|PK|delivery_id|uuid|уникальный идентификатор доставки|
|FK|order_id|uuid|идентификатор заказа|
|FK|delivery_service_id|uuid|идентификатор службы доставки|
||status|text|статус доставки|
||delivery_date|timestampt|дата доставки|
||tracking_number|varchar|трек-номер для отслеживания|
**Служба доставки (DeliveryService)**
|Ключ|Поле|Тип|Описание|
|----|----|---|--------|
|PK|delivery_service_id|uuid|уникальный идентификатор службы доставки|
||name|varchar|название службы доставки|
||contact_email|varchar|контактный email|
||contact_phone|int|контактный телефон|
Ер-диаграмма:
![Ер-диаграмма](https://github.com/nttorry/---/blob/9370b0d8283d1611eb21be6b81dbed5fe44b2888/%D0%B5%D1%80-%D0%B4%D0%B8%D0%B0%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B0.png)
## Архитектура системы маркетплейса
[![Диаграмма контекста](https://github.com/nttorry/---/blob/9370b0d8283d1611eb21be6b81dbed5fe44b2888/%D0%94%D0%B8%D0%B0%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B0%20%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%BA%D1%81%D1%82%D0%B0.png)
[![Диаграмма контейнеров](https://github.com/nttorry/---/blob/9370b0d8283d1611eb21be6b81dbed5fe44b2888/%D0%94%D0%B8%D0%B0%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B0%20%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80%D0%BE%D0%B2.png)
## Описание взаимодействия компонентов системы
![Оформление заказа](https://github.com/nttorry/---/blob/9370b0d8283d1611eb21be6b81dbed5fe44b2888/%D0%94%D0%B8%D0%B0%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B0%20%D0%BF%D0%BE%D1%81%D0%BB%D0%B5%D0%B4%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D0%B8%20%D0%9E%D1%84%D0%BE%D1%80%D0%BC%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%B7%D0%B0%D0%BA%D0%B0%D0%B7%D0%B0.png)
![Регистрация продавца](https://github.com/nttorry/---/blob/9370b0d8283d1611eb21be6b81dbed5fe44b2888/%D0%94%D0%B8%D0%B0%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B0%20%D0%BF%D0%BE%D1%81%D0%BB%D0%B5%D0%B4%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%81%D1%82%D0%B8%20%D1%80%D0%B5%D0%B3%D0%B8%D1%81%D1%82%D1%80%D0%B0%D1%86%D0%B8%D1%8F%20%D0%BF%D1%80%D0%BE%D0%B4%D0%B0%D0%B2%D1%86%D0%B0.png)
